import{j as e,r as d}from"./index-DbjegASZ.js";import{P as p,C as c}from"./Page-BKdIhRqp.js";import{R as x,p as g,T as h,q as f,X as v,Y as A,B as b}from"./generateCategoricalChart-DGDBBj6b.js";import{P as k,a as C,B as M,C as P}from"./PieChart-4WkcpTWO.js";import{m as R,b as y,c as L}from"./analytics-D0hfJSFh.js";const m=["#2563eb","#60a5fa","#93c5fd","#1d4ed8","#3b82f6"];function T({data:s,dataKey:n="value",nameKey:r="name",valueFormatter:l}){const i=s.reduce((a,t)=>a+(t[n]??0),0);return e.jsx("div",{className:"h-[220px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(k,{children:[e.jsx(C,{data:s,dataKey:n,nameKey:r,innerRadius:50,outerRadius:80,paddingAngle:4,isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out",labelLine:!1,label:({percent:a})=>`${Math.round(a*100)}%`,children:s.map((a,t)=>e.jsx(g,{fill:m[t%m.length]},`cell-${t}`))}),e.jsx(h,{formatter:(a,t,{payload:o})=>{const j=i?Math.round(a/i*100):0;return[`${l?l(a):a} (${j}%)`,o==null?void 0:o[r]]}}),e.jsx(f,{})]})})})}function u({data:s,dataKey:n="value",name:r="Valeur",color:l="#2563eb",valueFormatter:i,xAngle:a=-35}){return e.jsx("div",{className:"h-[220px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(M,{data:s,margin:{top:8,right:8,left:0,bottom:a!==0?36:8},children:[e.jsx(P,{strokeDasharray:"3 3",vertical:!1}),e.jsx(v,{dataKey:"name",tickLine:!1,axisLine:!1,fontSize:12,minTickGap:8,tickMargin:8,angle:a,textAnchor:a!==0?"end":"middle",interval:a!==0?0:"preserveEnd"}),e.jsx(A,{tickLine:!1,axisLine:!1,fontSize:12,tickMargin:8}),e.jsx(h,{cursor:{fill:"#f9fafb"},formatter:t=>i?i(t):t}),e.jsx(f,{}),e.jsx(b,{dataKey:n,name:r,fill:l,radius:[4,4,0,0],isAnimationActive:!0,animationDuration:500,animationEasing:"ease-out"})]})})})}function D(){const[s,n]=d.useState(0);d.useEffect(()=>{const i=setInterval(()=>n(a=>(a+1)%4),3e3);return()=>clearInterval(i)},[]);const r=d.useMemo(()=>{const i=s%2===0?.002:-.002;return R.map(a=>({...a,precision:Math.max(0,Math.min(1,a.precision+i))}))},[s]),l=["Anomalie de corrosion détectée sur 3 sites","Défaut d'alignement probable - 2 antennes","Risque de végétation proche - 5 sites"];return e.jsx(p,{children:e.jsxs("div",{className:"container-page space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(c,{title:"Précision modèle",children:e.jsx(u,{data:r,dataKey:"precision",name:"Précision",valueFormatter:i=>`${Math.round(i*100)}%`,xAngle:0})}),e.jsx(c,{title:"Types d'anomalies",children:e.jsx(T,{data:y,valueFormatter:i=>i})}),e.jsx(c,{title:"Taux de maintenance",children:e.jsx(u,{data:L,dataKey:"rate",name:"Taux",valueFormatter:i=>`${Math.round(i*100)}%`,xAngle:0})})]}),e.jsx(c,{title:"Insights IA",children:e.jsx("ul",{className:"list-disc pl-6 space-y-2 text-sm text-gray-700",children:l.map((i,a)=>e.jsx("li",{children:i},a))})})]})})}export{D as default};
